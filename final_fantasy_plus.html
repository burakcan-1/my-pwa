<!DOCTYPE html>
<html lang="en"><head>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2ba84a">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fantasy Animal Prompt — Plus</title>
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; --primary:#2ba84a; --border:#dcdcdc;
    }
    *{box-sizing:border-box}
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; background: var(--bg); color:var(--text); }
    h1 { font-size: 1.35rem; margin: 0 0 8px; }
    .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .field, fieldset { background: var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; }
    label { display:block; font-size: 0.95rem; margin-bottom: 6px; }
    input[type="text"], select, input[type="number"] { width: 100%; padding: 10px; font-size: 1rem; border-radius: 8px; border: 1px solid var(--border); background: #fff; }
    .row { display:flex; gap:8px; }
    .row > * { flex:1 }
    button { border: none; background: var(--primary); color: #fff; font-weight: 700; margin-top: 12px; padding:10px 14px; border-radius:10px; cursor:pointer; }
    button.secondary { background: #555; }
    #prompt { white-space: pre-wrap; background: #222; color: #eee; padding: 12px; border-radius: 8px; margin-top: 12px; min-height: 56px; }
    small { color:var(--muted); }
    fieldset legend { padding:0 6px; font-weight:700; }
    .inline { display:flex; flex-wrap:wrap; gap:8px; }
    .inline label { display:inline-flex; align-items:center; gap:6px; margin:0; padding:6px 8px; border:1px solid var(--border); border-radius:999px; background:#fafafa; }
    details { margin-top:12px; }
    .actions { display:flex; gap:8px; flex-wrap:wrap; }
    .muted { color:var(--muted) }
  </style>
</head>
<body>
  <h1>Fantasy Animal Builder — Plus</h1>
  <small>Tip: open this file in Safari/Chrome (not in an email preview) so buttons work.</small>

  <div class="grid" aria-label="Basics">
    <div class="field">
      <label for="name">Name (optional)</label>
      <input id="name" type="text" placeholder="Leave empty for a random name">
    </div>
    <div class="field">
      <label for="color">Main color</label>
      <input id="color" type="text" placeholder="e.g. Blue">
    </div>
    <div class="field">
      <label for="accent">Accent colors (optional)</label>
      <input id="accent" type="text" placeholder="e.g. gold trim, teal highlights">
    </div>
    <div class="field">
      <label for="size">Size</label>
      <select id="size">
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="large">Large</option>
        <option value="giant">Giant</option>
      </select>
    </div>
    <div class="field">
      <label for="age">Age</label>
      <select id="age">
        <option value="young">Young</option>
        <option value="adult">Adult</option>
        <option value="ancient">Ancient</option>
      </select>
    </div>
    <div class="field">
      <label for="wings">Wings?</label>
      <select id="wings">
        <option value="no wings">No wings</option>
        <option value="feathered wings">Feathered wings</option>
        <option value="bat wings">Bat wings</option>
        <option value="insect wings">Insect wings</option>
      </select>
    </div>
    <div class="field">
      <label for="horns">Horns?</label>
      <select id="horns">
        <option value="no horns">No horns</option>
        <option value="small horns">Small horns</option>
        <option value="big curved horns">Big curved horns</option>
        <option value="antlers">Antlers</option>
      </select>
    </div>
    <div class="field">
      <label for="legs">Number of legs</label>
      <select id="legs">
        <option>4</option>
        <option>2</option>
        <option>6</option>
        <option>8</option>
        <option>no visible legs</option>
      </select>
    </div>
    <div class="field">
      <label for="tail">Tail</label>
      <select id="tail">
        <option value="no tail">No tail</option>
        <option value="short tail">Short tail</option>
        <option value="long tail">Long tail</option>
        <option value="fluffy tail">Fluffy tail</option>
        <option value="spiked tail">Spiked tail</option>
        <option value="fishtail">Fishtail</option>
      </select>
    </div>
    <div class="field">
      <label for="habitat">Habitat</label>
      <select id="habitat">
        <option value="forest">Forest</option>
        <option value="sea">Sea</option>
        <option value="sky">Sky</option>
        <option value="mountains">Mountains</option>
        <option value="desert">Desert</option>
        <option value="city">City</option>
        <option value="outer space">Outer space</option>
      </select>
    </div>
    <div class="field">
      <label for="personality">Personality</label>
      <select id="personality">
        <option value="friendly">Friendly</option>
        <option value="curious">Curious</option>
        <option value="mischievous">Mischievous</option>
        <option value="brave">Brave</option>
        <option value="gentle">Gentle</option>
        <option value="shy">Shy</option>
      </select>
    </div>
    <div class="field">
      <label for="style">Art style</label>
      <select id="style">
        <option value="cartoon">Cartoon</option>
        <option value="watercolor">Watercolor</option>
        <option value="pixel art">Pixel art</option>
        <option value="3D render">3D render</option>
        <option value="realistic">Realistic</option>
        <option value="storybook illustration">Storybook illustration</option>
      </select>
    </div>
  </div>

  <fieldset>
    <legend>Patterns &amp; Features</legend>
    <div class="inline" id="patterns">
      <label><input type="checkbox" value="spots">Spots</label>
      <label><input type="checkbox" value="stripes">Stripes</label>
      <label><input type="checkbox" value="bioluminescent markings">Glowing markings</label>
      <label><input type="checkbox" value="scales">Scales</label>
      <label><input type="checkbox" value="fur">Fur</label>
      <label><input type="checkbox" value="feathers">Feathers</label>
      <label><input type="checkbox" value="armored plates">Armored plates</label>
      <label><input type="checkbox" value="mossy texture">Mossy texture</label>
      <label><input type="checkbox" value="crystal fragments">Crystal fragments</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Abilities</legend>
    <div class="inline" id="abilities">
      <label><input type="checkbox" value="electric sparks">Electric</label>
      <label><input type="checkbox" value="fire breath">Fire</label>
      <label><input type="checkbox" value="ice aura">Ice</label>
      <label><input type="checkbox" value="water control">Water control</label>
      <label><input type="checkbox" value="plant growth magic">Plant magic</label>
      <label><input type="checkbox" value="healing touch">Healing</label>
      <label><input type="checkbox" value="camouflage">Camouflage</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Pose &amp; Mood</legend>
    <div class="grid">
      <div class="field">
        <label for="pose">Pose</label>
        <select id="pose">
          <option value="sitting">Sitting</option>
          <option value="standing">Standing</option>
          <option value="walking">Walking</option>
          <option value="running">Running</option>
          <option value="curled up">Curled up</option>
        </select>
      </div>
      <div class="field">
        <label for="expression">Expression</label>
        <select id="expression">
          <option value="smiling">Smiling</option>
          <option value="playful">Playful</option>
          <option value="sleepy">Sleepy</option>
          <option value="curious">Curious</option>
          <option value="proud">Proud</option>
        </select>
      </div>
      <div class="field">
        <label for="time">Time of day / lighting</label>
        <select id="time">
          <option value="daylight">Daylight</option>
          <option value="golden hour">Golden hour</option>
          <option value="twilight">Twilight</option>
          <option value="night with soft glow">Night with soft glow</option>
        </select>
      </div>
      <div class="field">
        <label for="background">Background details (optional)</label>
        <input id="background" type="text" placeholder="e.g. ancient ruins, fireflies, waterfall">
      </div>
      <div class="field">
        <label for="extras">Accessories (optional)</label>
        <input id="extras" type="text" placeholder="e.g. scarf, tiny backpack, saddle">
      </div>
    </div>
  </fieldset>

  <details>
    <summary><strong>Advanced (optional)</strong> — composition, camera, and quality</summary>
    <div class="grid">
      <div class="field">
        <label for="composition">Composition</label>
        <select id="composition">
          <option value="centered composition">Centered</option>
          <option value="rule of thirds composition">Rule of thirds</option>
          <option value="dynamic diagonal composition">Dynamic diagonal</option>
        </select>
      </div>
      <div class="field">
        <label for="camera">Camera / lens</label>
        <select id="camera">
          <option value="eye-level view">Eye-level</option>
          <option value="low-angle view for a heroic feel">Low angle</option>
          <option value="top-down view">Top-down</option>
          <option value="wide-angle perspective">Wide-angle</option>
          <option value="macro close-up of details">Macro close-up</option>
        </select>
      </div>
      <div class="field">
        <label for="quality">Quality hints</label>
        <select id="quality">
          <option value="clean line work and simple shading">Clean lines, simple shading</option>
          <option value="soft shading and gentle gradients">Soft shading</option>
          <option value="high detail with crisp edges">High detail</option>
          <option value="textured brushes for a painterly feel">Painterly texture</option>
        </select>
      </div>
      <div class="field">
        <label for="negatives">Avoid (optional)</label>
        <input id="negatives" type="text" placeholder="e.g. no horns, no wings, no cluttered background">
      </div>
    </div>
  </details>

  <div class="actions">
    <button id="buildBtn" type="button">Get the Prompt</button>
    <button id="copyBtn" class="secondary" type="button">Copy Prompt</button>
    <button id="resetBtn" class="secondary" type="button">Reset</button>
    <button id="surpriseBtn" class="secondary" type="button">Surprise me</button>
  </div>

  <div id="prompt" aria-live="polite">Create an illustration of a fantasy animal named "Frosthoof". It is a medium young creature, mainly teal. It has bat wings, no horns, 2 legs, and fluffy tail. Its body features spots, stripes and scales. It can water control and healing touch. It lives in the city and has a mischievous personality. Pose it standing with a proud expression at night with soft glow. Background elements: ancient ruins with vines. Accessories: leaf crown. Draw it in watercolor style, using a centered composition, from an eye-level view. Rendering preference: textured brushes for a painterly feel. </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const $ = (id) => document.getElementById(id);

      function randomName() {
        const parts1 = ["Glow","Fluff","Storm","Shadow","Crystal","Spark","Moon","Star","Leaf","Frost","Iron","Lava","Thunder","Aqua","Mirth","Echo","Cinder","Bramble"];
        const parts2 = ["horn","wing","tail","scale","puff","fang","beast","claw","mane","whisker","flame","shell","hoof","gleam"];
        const p1 = parts1[Math.floor(Math.random() * parts1.length)];
        const p2 = parts2[Math.floor(Math.random() * parts2.length)];
        return p1 + p2;
      }

      function checkedValues(containerId){
        return Array.from(document.querySelectorAll('#'+containerId+' input[type="checkbox"]:checked'))
          .map(cb => cb.value);
      }

      function sentence(list, conj="and"){
        if(!list || list.length===0) return "";
        if(list.length===1) return list[0];
        return list.slice(0,-1).join(", ") + " " + conj + " " + list[list.length-1];
      }

      function buildPrompt() {
        // Read values at the time of click
        let name = $('name').value.trim() || randomName();
        const color = $('color').value.trim();
        const accent = $('accent').value.trim();
        const size = $('size').value;
        const age = $('age').value;
        const wings = $('wings').value;
        const horns = $('horns').value;
        const legs = $('legs').value;
        const tail = $('tail').value;
        const habitat = $('habitat').value;
        const personality = $('personality').value;
        const style = $('style').value;

        const pose = $('pose').value;
        const expression = $('expression').value;
        const time = $('time').value;
        const background = $('background').value.trim();
        const extras = $('extras').value.trim();

        const composition = $('composition').value;
        const camera = $('camera').value;
        const quality = $('quality').value;
        const negatives = $('negatives').value.trim();

        const patterns = checkedValues('patterns');
        const abilities = checkedValues('abilities');

        let prompt = `Create an illustration of a fantasy animal named \"${name}\". `;
        prompt += `It is a ${size} ${age} creature`;
        if (color) prompt += `, mainly ${color}`;
        if (accent) prompt += ` with ${accent}`;
        prompt += `. `;
        prompt += `It has ${wings}, ${horns}, ${legs} legs, and ${tail}. `;

        if (patterns.length) prompt += `Its body features ${sentence(patterns)}. `;
        if (abilities.length) prompt += `It can ${sentence(abilities)}. `;

        prompt += `It lives in the ${habitat} and has a ${personality} personality. `;
        prompt += `Pose it ${pose} with a ${expression} expression at ${time}. `;
        if (background) prompt += `Background elements: ${background}. `;
        if (extras) prompt += `Accessories: ${extras}. `;

        prompt += `Draw it in ${style} style, using a ${composition}, from an ${camera}. `;
        prompt += `Rendering preference: ${quality}. `;
        if (negatives) prompt += `Avoid: ${negatives}.`;

        $('prompt').textContent = prompt;
      }

      function copyPrompt() {
        const text = $('prompt').textContent || '';
        if (!text) return;
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(function(){ alert('Prompt copied!'); }, function(){ fallbackCopy(text); });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); alert('Prompt copied!'); }
        catch (e) { alert('Select and copy the text manually.'); }
        document.body.removeChild(ta);
      }

      function resetAll(){
        document.querySelectorAll('input[type="text"]').forEach(i=>i.value="");
        document.querySelectorAll('select').forEach(s=>s.selectedIndex=0);
        document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false);
        $('prompt').textContent = 'Your prompt will appear here…';
      }

      // --- Surprise me feature ---
      function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
      function surpriseMe(){
        // clear prompt display
        $('prompt').textContent = 'Your prompt will appear here…';

        const pools = {
          color: ["blue","green","purple","golden","turquoise","emerald","crimson","silver","teal","lavender"],
          accent: ["neon highlights","glowing stripes","sparkling dots","metallic accents","pearlescent shine","rainbow tips"],
          size: ["small","medium","large","giant"],
          age: ["young","adult","ancient"],
          wings: ["no wings","feathered wings","bat wings","insect wings"],
          horns: ["no horns","small horns","big curved horns","antlers"],
          legs: ["4","2","6","8","no visible legs"],
          tail: ["no tail","short tail","long tail","fluffy tail","spiked tail","fishtail"],
          habitat: ["forest","sea","sky","mountains","desert","city","outer space"],
          personality: ["friendly","curious","mischievous","brave","gentle","shy"],
          style: ["cartoon","watercolor","pixel art","3D render","realistic","storybook illustration"],
          pose: ["sitting","standing","walking","running","curled up"],
          expression: ["smiling","playful","sleepy","curious","proud"],
          time: ["daylight","golden hour","twilight","night with soft glow"],
          background: [
            "glowing mushrooms and tall ferns","crystal waterfall","floating islands",
            "starry sky and clouds","coral reef","icy cliffs","ancient ruins with vines"
          ],
          extras: ["scarf","tiny backpack","necklace of seashells","leaf crown","bracelets","small saddle"],
          composition: ["centered composition","rule of thirds composition","dynamic diagonal composition"],
          camera: ["eye-level view","low-angle view for a heroic feel","top-down view","wide-angle perspective","macro close-up of details"],
          quality: ["clean line work and simple shading","soft shading and gentle gradients","high detail with crisp edges","textured brushes for a painterly feel"],
          negatives: ["","no text","no watermark","no scary elements","no weapons","no gore","no cluttered background"]
        };

        // text inputs
        const nameEl = $('name'); if (nameEl) nameEl.value = randomName();
        const colorEl = $('color'); if (colorEl) colorEl.value = pick(pools.color);
        const accentEl = $('accent'); if (accentEl) accentEl.value = Math.random()<0.7 ? pick(pools.accent) : "";

        // selects
        const setSel = (id, val)=>{ const el=$(id); if(el){ el.value=val; } };
        setSel('size', pick(pools.size));
        setSel('age', pick(pools.age));
        setSel('wings', pick(pools.wings));
        setSel('horns', pick(pools.horns));
        setSel('legs', pick(pools.legs));
        setSel('tail', pick(pools.tail));
        setSel('habitat', pick(pools.habitat));
        setSel('personality', pick(pools.personality));
        setSel('style', pick(pools.style));
        setSel('pose', pick(pools.pose));
        setSel('expression', pick(pools.expression));
        setSel('time', pick(pools.time));
        setSel('composition', pick(pools.composition));
        setSel('camera', pick(pools.camera));
        setSel('quality', pick(pools.quality));

        // optional text fields
        const bgEl = $('background'); if (bgEl) bgEl.value = Math.random()<0.8 ? pick(pools.background) : "";
        const exEl = $('extras'); if (exEl) exEl.value = Math.random()<0.6 ? pick(pools.extras) : "";
        const negEl = $('negatives'); if (negEl) negEl.value = pick(pools.negatives);

        // checkboxes random subset
        function randomizeChecks(containerId, prob){
          document.querySelectorAll('#'+containerId+' input[type="checkbox"]').forEach(cb=>{
            cb.checked = Math.random() < prob;
          });
        }
        randomizeChecks('patterns', 0.45);
        randomizeChecks('abilities', 0.4);

        // finally build prompt
        buildPrompt();
      }

      $('buildBtn').addEventListener('click', buildPrompt, false);
      $('copyBtn').addEventListener('click', copyPrompt, false);
      $('resetBtn').addEventListener('click', resetAll, false);
      $('surpriseBtn').addEventListener('click', surpriseMe, false);
    });
  </script>
  <script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js');
  });
}
</script>

</body></html>
<head>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2ba84a">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fantasy Animal Prompt — Plus</title>
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; --primary:#2ba84a; --border:#dcdcdc;
    }
    *{box-sizing:border-box}
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; background: var(--bg); color:var(--text); }
    h1 { font-size: 1.35rem; margin: 0 0 8px; }
    .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .field, fieldset { background: var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; }
    label { display:block; font-size: 0.95rem; margin-bottom: 6px; }
    input[type="text"], select, input[type="number"] { width: 100%; padding: 10px; font-size: 1rem; border-radius: 8px; border: 1px solid var(--border); background: #fff; }
    .row { display:flex; gap:8px; }
    .row > * { flex:1 }
    button { border: none; background: var(--primary); color: #fff; font-weight: 700; margin-top: 12px; padding:10px 14px; border-radius:10px; cursor:pointer; }
    button.secondary { background: #555; }
    #prompt { white-space: pre-wrap; background: #222; color: #eee; padding: 12px; border-radius: 8px; margin-top: 12px; min-height: 56px; }
    small { color:var(--muted); }
    fieldset legend { padding:0 6px; font-weight:700; }
    .inline { display:flex; flex-wrap:wrap; gap:8px; }
    .inline label { display:inline-flex; align-items:center; gap:6px; margin:0; padding:6px 8px; border:1px solid var(--border); border-radius:999px; background:#fafafa; }
    details { margin-top:12px; }
    .actions { display:flex; gap:8px; flex-wrap:wrap; }
    .muted { color:var(--muted) }
  </style>
</head>
<body>
  <h1>Fantasy Animal Builder — Plus</h1>
  <small>Tip: open this file in Safari/Chrome (not in an email preview) so buttons work.</small>

  <div class="grid" aria-label="Basics">
    <div class="field">
      <label for="name">Name (optional)</label>
      <input id="name" type="text" placeholder="Leave empty for a random name">
    </div>
    <div class="field">
      <label for="color">Main color</label>
      <input id="color" type="text" placeholder="e.g. Blue">
    </div>
    <div class="field">
      <label for="accent">Accent colors (optional)</label>
      <input id="accent" type="text" placeholder="e.g. gold trim, teal highlights">
    </div>
    <div class="field">
      <label for="size">Size</label>
      <select id="size">
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="large">Large</option>
        <option value="giant">Giant</option>
      </select>
    </div>
    <div class="field">
      <label for="age">Age</label>
      <select id="age">
        <option value="young">Young</option>
        <option value="adult">Adult</option>
        <option value="ancient">Ancient</option>
      </select>
    </div>
    <div class="field">
      <label for="wings">Wings?</label>
      <select id="wings">
        <option value="no wings">No wings</option>
        <option value="feathered wings">Feathered wings</option>
        <option value="bat wings">Bat wings</option>
        <option value="insect wings">Insect wings</option>
      </select>
    </div>
    <div class="field">
      <label for="horns">Horns?</label>
      <select id="horns">
        <option value="no horns">No horns</option>
        <option value="small horns">Small horns</option>
        <option value="big curved horns">Big curved horns</option>
        <option value="antlers">Antlers</option>
      </select>
    </div>
    <div class="field">
      <label for="legs">Number of legs</label>
      <select id="legs">
        <option>4</option>
        <option>2</option>
        <option>6</option>
        <option>8</option>
        <option>no visible legs</option>
      </select>
    </div>
    <div class="field">
      <label for="tail">Tail</label>
      <select id="tail">
        <option value="no tail">No tail</option>
        <option value="short tail">Short tail</option>
        <option value="long tail">Long tail</option>
        <option value="fluffy tail">Fluffy tail</option>
        <option value="spiked tail">Spiked tail</option>
        <option value="fishtail">Fishtail</option>
      </select>
    </div>
    <div class="field">
      <label for="habitat">Habitat</label>
      <select id="habitat">
        <option value="forest">Forest</option>
        <option value="sea">Sea</option>
        <option value="sky">Sky</option>
        <option value="mountains">Mountains</option>
        <option value="desert">Desert</option>
        <option value="city">City</option>
        <option value="outer space">Outer space</option>
      </select>
    </div>
    <div class="field">
      <label for="personality">Personality</label>
      <select id="personality">
        <option value="friendly">Friendly</option>
        <option value="curious">Curious</option>
        <option value="mischievous">Mischievous</option>
        <option value="brave">Brave</option>
        <option value="gentle">Gentle</option>
        <option value="shy">Shy</option>
      </select>
    </div>
    <div class="field">
      <label for="style">Art style</label>
      <select id="style">
        <option value="cartoon">Cartoon</option>
        <option value="watercolor">Watercolor</option>
        <option value="pixel art">Pixel art</option>
        <option value="3D render">3D render</option>
        <option value="realistic">Realistic</option>
        <option value="storybook illustration">Storybook illustration</option>
      </select>
    </div>
  </div>

  <fieldset>
    <legend>Patterns &amp; Features</legend>
    <div class="inline" id="patterns">
      <label><input type="checkbox" value="spots">Spots</label>
      <label><input type="checkbox" value="stripes">Stripes</label>
      <label><input type="checkbox" value="bioluminescent markings">Glowing markings</label>
      <label><input type="checkbox" value="scales">Scales</label>
      <label><input type="checkbox" value="fur">Fur</label>
      <label><input type="checkbox" value="feathers">Feathers</label>
      <label><input type="checkbox" value="armored plates">Armored plates</label>
      <label><input type="checkbox" value="mossy texture">Mossy texture</label>
      <label><input type="checkbox" value="crystal fragments">Crystal fragments</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Abilities</legend>
    <div class="inline" id="abilities">
      <label><input type="checkbox" value="electric sparks">Electric</label>
      <label><input type="checkbox" value="fire breath">Fire</label>
      <label><input type="checkbox" value="ice aura">Ice</label>
      <label><input type="checkbox" value="water control">Water control</label>
      <label><input type="checkbox" value="plant growth magic">Plant magic</label>
      <label><input type="checkbox" value="healing touch">Healing</label>
      <label><input type="checkbox" value="camouflage">Camouflage</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Pose &amp; Mood</legend>
    <div class="grid">
      <div class="field">
        <label for="pose">Pose</label>
        <select id="pose">
          <option value="sitting">Sitting</option>
          <option value="standing">Standing</option>
          <option value="walking">Walking</option>
          <option value="running">Running</option>
          <option value="curled up">Curled up</option>
        </select>
      </div>
      <div class="field">
        <label for="expression">Expression</label>
        <select id="expression">
          <option value="smiling">Smiling</option>
          <option value="playful">Playful</option>
          <option value="sleepy">Sleepy</option>
          <option value="curious">Curious</option>
          <option value="proud">Proud</option>
        </select>
      </div>
      <div class="field">
        <label for="time">Time of day / lighting</label>
        <select id="time">
          <option value="daylight">Daylight</option>
          <option value="golden hour">Golden hour</option>
          <option value="twilight">Twilight</option>
          <option value="night with soft glow">Night with soft glow</option>
        </select>
      </div>
      <div class="field">
        <label for="background">Background details (optional)</label>
        <input id="background" type="text" placeholder="e.g. ancient ruins, fireflies, waterfall">
      </div>
      <div class="field">
        <label for="extras">Accessories (optional)</label>
        <input id="extras" type="text" placeholder="e.g. scarf, tiny backpack, saddle">
      </div>
    </div>
  </fieldset>

  <details>
    <summary><strong>Advanced (optional)</strong> — composition, camera, and quality</summary>
    <div class="grid">
      <div class="field">
        <label for="composition">Composition</label>
        <select id="composition">
          <option value="centered composition">Centered</option>
          <option value="rule of thirds composition">Rule of thirds</option>
          <option value="dynamic diagonal composition">Dynamic diagonal</option>
        </select>
      </div>
      <div class="field">
        <label for="camera">Camera / lens</label>
        <select id="camera">
          <option value="eye-level view">Eye-level</option>
          <option value="low-angle view for a heroic feel">Low angle</option>
          <option value="top-down view">Top-down</option>
          <option value="wide-angle perspective">Wide-angle</option>
          <option value="macro close-up of details">Macro close-up</option>
        </select>
      </div>
      <div class="field">
        <label for="quality">Quality hints</label>
        <select id="quality">
          <option value="clean line work and simple shading">Clean lines, simple shading</option>
          <option value="soft shading and gentle gradients">Soft shading</option>
          <option value="high detail with crisp edges">High detail</option>
          <option value="textured brushes for a painterly feel">Painterly texture</option>
        </select>
      </div>
      <div class="field">
        <label for="negatives">Avoid (optional)</label>
        <input id="negatives" type="text" placeholder="e.g. no horns, no wings, no cluttered background">
      </div>
    </div>
  </details>

  <div class="actions">
    <button id="buildBtn" type="button">Get the Prompt</button>
    <button id="copyBtn" class="secondary" type="button">Copy Prompt</button>
    <button id="resetBtn" class="secondary" type="button">Reset</button>
    <button id="surpriseBtn" class="secondary" type="button">Surprise me</button>
  </div>

  <div id="prompt" aria-live="polite">Create an illustration of a fantasy animal named "Frosthoof". It is a medium young creature, mainly teal. It has bat wings, no horns, 2 legs, and fluffy tail. Its body features spots, stripes and scales. It can water control and healing touch. It lives in the city and has a mischievous personality. Pose it standing with a proud expression at night with soft glow. Background elements: ancient ruins with vines. Accessories: leaf crown. Draw it in watercolor style, using a centered composition, from an eye-level view. Rendering preference: textured brushes for a painterly feel. </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const $ = (id) => document.getElementById(id);

      function randomName() {
        const parts1 = ["Glow","Fluff","Storm","Shadow","Crystal","Spark","Moon","Star","Leaf","Frost","Iron","Lava","Thunder","Aqua","Mirth","Echo","Cinder","Bramble"];
        const parts2 = ["horn","wing","tail","scale","puff","fang","beast","claw","mane","whisker","flame","shell","hoof","gleam"];
        const p1 = parts1[Math.floor(Math.random() * parts1.length)];
        const p2 = parts2[Math.floor(Math.random() * parts2.length)];
        return p1 + p2;
      }

      function checkedValues(containerId){
        return Array.from(document.querySelectorAll('#'+containerId+' input[type="checkbox"]:checked'))
          .map(cb => cb.value);
      }

      function sentence(list, conj="and"){
        if(!list || list.length===0) return "";
        if(list.length===1) return list[0];
        return list.slice(0,-1).join(", ") + " " + conj + " " + list[list.length-1];
      }

      function buildPrompt() {
        // Read values at the time of click
        let name = $('name').value.trim() || randomName();
        const color = $('color').value.trim();
        const accent = $('accent').value.trim();
        const size = $('size').value;
        const age = $('age').value;
        const wings = $('wings').value;
        const horns = $('horns').value;
        const legs = $('legs').value;
        const tail = $('tail').value;
        const habitat = $('habitat').value;
        const personality = $('personality').value;
        const style = $('style').value;

        const pose = $('pose').value;
        const expression = $('expression').value;
        const time = $('time').value;
        const background = $('background').value.trim();
        const extras = $('extras').value.trim();

        const composition = $('composition').value;
        const camera = $('camera').value;
        const quality = $('quality').value;
        const negatives = $('negatives').value.trim();

        const patterns = checkedValues('patterns');
        const abilities = checkedValues('abilities');

        let prompt = `Create an illustration of a fantasy animal named \"${name}\". `;
        prompt += `It is a ${size} ${age} creature`;
        if (color) prompt += `, mainly ${color}`;
        if (accent) prompt += ` with ${accent}`;
        prompt += `. `;
        prompt += `It has ${wings}, ${horns}, ${legs} legs, and ${tail}. `;

        if (patterns.length) prompt += `Its body features ${sentence(patterns)}. `;
        if (abilities.length) prompt += `It can ${sentence(abilities)}. `;

        prompt += `It lives in the ${habitat} and has a ${personality} personality. `;
        prompt += `Pose it ${pose} with a ${expression} expression at ${time}. `;
        if (background) prompt += `Background elements: ${background}. `;
        if (extras) prompt += `Accessories: ${extras}. `;

        prompt += `Draw it in ${style} style, using a ${composition}, from an ${camera}. `;
        prompt += `Rendering preference: ${quality}. `;
        if (negatives) prompt += `Avoid: ${negatives}.`;

        $('prompt').textContent = prompt;
      }

      function copyPrompt() {
        const text = $('prompt').textContent || '';
        if (!text) return;
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(function(){ alert('Prompt copied!'); }, function(){ fallbackCopy(text); });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); alert('Prompt copied!'); }
        catch (e) { alert('Select and copy the text manually.'); }
        document.body.removeChild(ta);
      }

      function resetAll(){
        document.querySelectorAll('input[type="text"]').forEach(i=>i.value="");
        document.querySelectorAll('select').forEach(s=>s.selectedIndex=0);
        document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false);
        $('prompt').textContent = 'Your prompt will appear here…';
      }

      // --- Surprise me feature ---
      function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
      function surpriseMe(){
        // clear prompt display
        $('prompt').textContent = 'Your prompt will appear here…';

        const pools = {
          color: ["blue","green","purple","golden","turquoise","emerald","crimson","silver","teal","lavender"],
          accent: ["neon highlights","glowing stripes","sparkling dots","metallic accents","pearlescent shine","rainbow tips"],
          size: ["small","medium","large","giant"],
          age: ["young","adult","ancient"],
          wings: ["no wings","feathered wings","bat wings","insect wings"],
          horns: ["no horns","small horns","big curved horns","antlers"],
          legs: ["4","2","6","8","no visible legs"],
          tail: ["no tail","short tail","long tail","fluffy tail","spiked tail","fishtail"],
          habitat: ["forest","sea","sky","mountains","desert","city","outer space"],
          personality: ["friendly","curious","mischievous","brave","gentle","shy"],
          style: ["cartoon","watercolor","pixel art","3D render","realistic","storybook illustration"],
          pose: ["sitting","standing","walking","running","curled up"],
          expression: ["smiling","playful","sleepy","curious","proud"],
          time: ["daylight","golden hour","twilight","night with soft glow"],
          background: [
            "glowing mushrooms and tall ferns","crystal waterfall","floating islands",
            "starry sky and clouds","coral reef","icy cliffs","ancient ruins with vines"
          ],
          extras: ["scarf","tiny backpack","necklace of seashells","leaf crown","bracelets","small saddle"],
          composition: ["centered composition","rule of thirds composition","dynamic diagonal composition"],
          camera: ["eye-level view","low-angle view for a heroic feel","top-down view","wide-angle perspective","macro close-up of details"],
          quality: ["clean line work and simple shading","soft shading and gentle gradients","high detail with crisp edges","textured brushes for a painterly feel"],
          negatives: ["","no text","no watermark","no scary elements","no weapons","no gore","no cluttered background"]
        };

        // text inputs
        const nameEl = $('name'); if (nameEl) nameEl.value = randomName();
        const colorEl = $('color'); if (colorEl) colorEl.value = pick(pools.color);
        const accentEl = $('accent'); if (accentEl) accentEl.value = Math.random()<0.7 ? pick(pools.accent) : "";

        // selects
        const setSel = (id, val)=>{ const el=$(id); if(el){ el.value=val; } };
        setSel('size', pick(pools.size));
        setSel('age', pick(pools.age));
        setSel('wings', pick(pools.wings));
        setSel('horns', pick(pools.horns));
        setSel('legs', pick(pools.legs));
        setSel('tail', pick(pools.tail));
        setSel('habitat', pick(pools.habitat));
        setSel('personality', pick(pools.personality));
        setSel('style', pick(pools.style));
        setSel('pose', pick(pools.pose));
        setSel('expression', pick(pools.expression));
        setSel('time', pick(pools.time));
        setSel('composition', pick(pools.composition));
        setSel('camera', pick(pools.camera));
        setSel('quality', pick(pools.quality));

        // optional text fields
        const bgEl = $('background'); if (bgEl) bgEl.value = Math.random()<0.8 ? pick(pools.background) : "";
        const exEl = $('extras'); if (exEl) exEl.value = Math.random()<0.6 ? pick(pools.extras) : "";
        const negEl = $('negatives'); if (negEl) negEl.value = pick(pools.negatives);

        // checkboxes random subset
        function randomizeChecks(containerId, prob){
          document.querySelectorAll('#'+containerId+' input[type="checkbox"]').forEach(cb=>{
            cb.checked = Math.random() < prob;
          });
        }
        randomizeChecks('patterns', 0.45);
        randomizeChecks('abilities', 0.4);

        // finally build prompt
        buildPrompt();
      }

      $('buildBtn').addEventListener('click', buildPrompt, false);
      $('copyBtn').addEventListener('click', copyPrompt, false);
      $('resetBtn').addEventListener('click', resetAll, false);
      $('surpriseBtn').addEventListener('click', surpriseMe, false);
    });
  </script>
  <script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js');
  });
}
</script>

</body>
<html lang="en"><head>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2ba84a">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fantasy Animal Prompt — Plus</title>
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#111; --muted:#666; --primary:#2ba84a; --border:#dcdcdc;
    }
    *{box-sizing:border-box}
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; background: var(--bg); color:var(--text); }
    h1 { font-size: 1.35rem; margin: 0 0 8px; }
    .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .field, fieldset { background: var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; }
    label { display:block; font-size: 0.95rem; margin-bottom: 6px; }
    input[type="text"], select, input[type="number"] { width: 100%; padding: 10px; font-size: 1rem; border-radius: 8px; border: 1px solid var(--border); background: #fff; }
    .row { display:flex; gap:8px; }
    .row > * { flex:1 }
    button { border: none; background: var(--primary); color: #fff; font-weight: 700; margin-top: 12px; padding:10px 14px; border-radius:10px; cursor:pointer; }
    button.secondary { background: #555; }
    #prompt { white-space: pre-wrap; background: #222; color: #eee; padding: 12px; border-radius: 8px; margin-top: 12px; min-height: 56px; }
    small { color:var(--muted); }
    fieldset legend { padding:0 6px; font-weight:700; }
    .inline { display:flex; flex-wrap:wrap; gap:8px; }
    .inline label { display:inline-flex; align-items:center; gap:6px; margin:0; padding:6px 8px; border:1px solid var(--border); border-radius:999px; background:#fafafa; }
    details { margin-top:12px; }
    .actions { display:flex; gap:8px; flex-wrap:wrap; }
    .muted { color:var(--muted) }
  </style>
</head>
<body>
  <h1>Fantasy Animal Builder — Plus</h1>
  <small>Tip: open this file in Safari/Chrome (not in an email preview) so buttons work.</small>

  <div class="grid" aria-label="Basics">
    <div class="field">
      <label for="name">Name (optional)</label>
      <input id="name" type="text" placeholder="Leave empty for a random name">
    </div>
    <div class="field">
      <label for="color">Main color</label>
      <input id="color" type="text" placeholder="e.g. Blue">
    </div>
    <div class="field">
      <label for="accent">Accent colors (optional)</label>
      <input id="accent" type="text" placeholder="e.g. gold trim, teal highlights">
    </div>
    <div class="field">
      <label for="size">Size</label>
      <select id="size">
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="large">Large</option>
        <option value="giant">Giant</option>
      </select>
    </div>
    <div class="field">
      <label for="age">Age</label>
      <select id="age">
        <option value="young">Young</option>
        <option value="adult">Adult</option>
        <option value="ancient">Ancient</option>
      </select>
    </div>
    <div class="field">
      <label for="wings">Wings?</label>
      <select id="wings">
        <option value="no wings">No wings</option>
        <option value="feathered wings">Feathered wings</option>
        <option value="bat wings">Bat wings</option>
        <option value="insect wings">Insect wings</option>
      </select>
    </div>
    <div class="field">
      <label for="horns">Horns?</label>
      <select id="horns">
        <option value="no horns">No horns</option>
        <option value="small horns">Small horns</option>
        <option value="big curved horns">Big curved horns</option>
        <option value="antlers">Antlers</option>
      </select>
    </div>
    <div class="field">
      <label for="legs">Number of legs</label>
      <select id="legs">
        <option>4</option>
        <option>2</option>
        <option>6</option>
        <option>8</option>
        <option>no visible legs</option>
      </select>
    </div>
    <div class="field">
      <label for="tail">Tail</label>
      <select id="tail">
        <option value="no tail">No tail</option>
        <option value="short tail">Short tail</option>
        <option value="long tail">Long tail</option>
        <option value="fluffy tail">Fluffy tail</option>
        <option value="spiked tail">Spiked tail</option>
        <option value="fishtail">Fishtail</option>
      </select>
    </div>
    <div class="field">
      <label for="habitat">Habitat</label>
      <select id="habitat">
        <option value="forest">Forest</option>
        <option value="sea">Sea</option>
        <option value="sky">Sky</option>
        <option value="mountains">Mountains</option>
        <option value="desert">Desert</option>
        <option value="city">City</option>
        <option value="outer space">Outer space</option>
      </select>
    </div>
    <div class="field">
      <label for="personality">Personality</label>
      <select id="personality">
        <option value="friendly">Friendly</option>
        <option value="curious">Curious</option>
        <option value="mischievous">Mischievous</option>
        <option value="brave">Brave</option>
        <option value="gentle">Gentle</option>
        <option value="shy">Shy</option>
      </select>
    </div>
    <div class="field">
      <label for="style">Art style</label>
      <select id="style">
        <option value="cartoon">Cartoon</option>
        <option value="watercolor">Watercolor</option>
        <option value="pixel art">Pixel art</option>
        <option value="3D render">3D render</option>
        <option value="realistic">Realistic</option>
        <option value="storybook illustration">Storybook illustration</option>
      </select>
    </div>
  </div>

  <fieldset>
    <legend>Patterns &amp; Features</legend>
    <div class="inline" id="patterns">
      <label><input type="checkbox" value="spots">Spots</label>
      <label><input type="checkbox" value="stripes">Stripes</label>
      <label><input type="checkbox" value="bioluminescent markings">Glowing markings</label>
      <label><input type="checkbox" value="scales">Scales</label>
      <label><input type="checkbox" value="fur">Fur</label>
      <label><input type="checkbox" value="feathers">Feathers</label>
      <label><input type="checkbox" value="armored plates">Armored plates</label>
      <label><input type="checkbox" value="mossy texture">Mossy texture</label>
      <label><input type="checkbox" value="crystal fragments">Crystal fragments</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Abilities</legend>
    <div class="inline" id="abilities">
      <label><input type="checkbox" value="electric sparks">Electric</label>
      <label><input type="checkbox" value="fire breath">Fire</label>
      <label><input type="checkbox" value="ice aura">Ice</label>
      <label><input type="checkbox" value="water control">Water control</label>
      <label><input type="checkbox" value="plant growth magic">Plant magic</label>
      <label><input type="checkbox" value="healing touch">Healing</label>
      <label><input type="checkbox" value="camouflage">Camouflage</label>
    </div>
  </fieldset>

  <fieldset>
    <legend>Pose &amp; Mood</legend>
    <div class="grid">
      <div class="field">
        <label for="pose">Pose</label>
        <select id="pose">
          <option value="sitting">Sitting</option>
          <option value="standing">Standing</option>
          <option value="walking">Walking</option>
          <option value="running">Running</option>
          <option value="curled up">Curled up</option>
        </select>
      </div>
      <div class="field">
        <label for="expression">Expression</label>
        <select id="expression">
          <option value="smiling">Smiling</option>
          <option value="playful">Playful</option>
          <option value="sleepy">Sleepy</option>
          <option value="curious">Curious</option>
          <option value="proud">Proud</option>
        </select>
      </div>
      <div class="field">
        <label for="time">Time of day / lighting</label>
        <select id="time">
          <option value="daylight">Daylight</option>
          <option value="golden hour">Golden hour</option>
          <option value="twilight">Twilight</option>
          <option value="night with soft glow">Night with soft glow</option>
        </select>
      </div>
      <div class="field">
        <label for="background">Background details (optional)</label>
        <input id="background" type="text" placeholder="e.g. ancient ruins, fireflies, waterfall">
      </div>
      <div class="field">
        <label for="extras">Accessories (optional)</label>
        <input id="extras" type="text" placeholder="e.g. scarf, tiny backpack, saddle">
      </div>
    </div>
  </fieldset>

  <details>
    <summary><strong>Advanced (optional)</strong> — composition, camera, and quality</summary>
    <div class="grid">
      <div class="field">
        <label for="composition">Composition</label>
        <select id="composition">
          <option value="centered composition">Centered</option>
          <option value="rule of thirds composition">Rule of thirds</option>
          <option value="dynamic diagonal composition">Dynamic diagonal</option>
        </select>
      </div>
      <div class="field">
        <label for="camera">Camera / lens</label>
        <select id="camera">
          <option value="eye-level view">Eye-level</option>
          <option value="low-angle view for a heroic feel">Low angle</option>
          <option value="top-down view">Top-down</option>
          <option value="wide-angle perspective">Wide-angle</option>
          <option value="macro close-up of details">Macro close-up</option>
        </select>
      </div>
      <div class="field">
        <label for="quality">Quality hints</label>
        <select id="quality">
          <option value="clean line work and simple shading">Clean lines, simple shading</option>
          <option value="soft shading and gentle gradients">Soft shading</option>
          <option value="high detail with crisp edges">High detail</option>
          <option value="textured brushes for a painterly feel">Painterly texture</option>
        </select>
      </div>
      <div class="field">
        <label for="negatives">Avoid (optional)</label>
        <input id="negatives" type="text" placeholder="e.g. no horns, no wings, no cluttered background">
      </div>
    </div>
  </details>

  <div class="actions">
    <button id="buildBtn" type="button">Get the Prompt</button>
    <button id="copyBtn" class="secondary" type="button">Copy Prompt</button>
    <button id="resetBtn" class="secondary" type="button">Reset</button>
    <button id="surpriseBtn" class="secondary" type="button">Surprise me</button>
  </div>

  <div id="prompt" aria-live="polite">Create an illustration of a fantasy animal named "Frosthoof". It is a medium young creature, mainly teal. It has bat wings, no horns, 2 legs, and fluffy tail. Its body features spots, stripes and scales. It can water control and healing touch. It lives in the city and has a mischievous personality. Pose it standing with a proud expression at night with soft glow. Background elements: ancient ruins with vines. Accessories: leaf crown. Draw it in watercolor style, using a centered composition, from an eye-level view. Rendering preference: textured brushes for a painterly feel. </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const $ = (id) => document.getElementById(id);

      function randomName() {
        const parts1 = ["Glow","Fluff","Storm","Shadow","Crystal","Spark","Moon","Star","Leaf","Frost","Iron","Lava","Thunder","Aqua","Mirth","Echo","Cinder","Bramble"];
        const parts2 = ["horn","wing","tail","scale","puff","fang","beast","claw","mane","whisker","flame","shell","hoof","gleam"];
        const p1 = parts1[Math.floor(Math.random() * parts1.length)];
        const p2 = parts2[Math.floor(Math.random() * parts2.length)];
        return p1 + p2;
      }

      function checkedValues(containerId){
        return Array.from(document.querySelectorAll('#'+containerId+' input[type="checkbox"]:checked'))
          .map(cb => cb.value);
      }

      function sentence(list, conj="and"){
        if(!list || list.length===0) return "";
        if(list.length===1) return list[0];
        return list.slice(0,-1).join(", ") + " " + conj + " " + list[list.length-1];
      }

      function buildPrompt() {
        // Read values at the time of click
        let name = $('name').value.trim() || randomName();
        const color = $('color').value.trim();
        const accent = $('accent').value.trim();
        const size = $('size').value;
        const age = $('age').value;
        const wings = $('wings').value;
        const horns = $('horns').value;
        const legs = $('legs').value;
        const tail = $('tail').value;
        const habitat = $('habitat').value;
        const personality = $('personality').value;
        const style = $('style').value;

        const pose = $('pose').value;
        const expression = $('expression').value;
        const time = $('time').value;
        const background = $('background').value.trim();
        const extras = $('extras').value.trim();

        const composition = $('composition').value;
        const camera = $('camera').value;
        const quality = $('quality').value;
        const negatives = $('negatives').value.trim();

        const patterns = checkedValues('patterns');
        const abilities = checkedValues('abilities');

        let prompt = `Create an illustration of a fantasy animal named \"${name}\". `;
        prompt += `It is a ${size} ${age} creature`;
        if (color) prompt += `, mainly ${color}`;
        if (accent) prompt += ` with ${accent}`;
        prompt += `. `;
        prompt += `It has ${wings}, ${horns}, ${legs} legs, and ${tail}. `;

        if (patterns.length) prompt += `Its body features ${sentence(patterns)}. `;
        if (abilities.length) prompt += `It can ${sentence(abilities)}. `;

        prompt += `It lives in the ${habitat} and has a ${personality} personality. `;
        prompt += `Pose it ${pose} with a ${expression} expression at ${time}. `;
        if (background) prompt += `Background elements: ${background}. `;
        if (extras) prompt += `Accessories: ${extras}. `;

        prompt += `Draw it in ${style} style, using a ${composition}, from an ${camera}. `;
        prompt += `Rendering preference: ${quality}. `;
        if (negatives) prompt += `Avoid: ${negatives}.`;

        $('prompt').textContent = prompt;
      }

      function copyPrompt() {
        const text = $('prompt').textContent || '';
        if (!text) return;
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(function(){ alert('Prompt copied!'); }, function(){ fallbackCopy(text); });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); alert('Prompt copied!'); }
        catch (e) { alert('Select and copy the text manually.'); }
        document.body.removeChild(ta);
      }

      function resetAll(){
        document.querySelectorAll('input[type="text"]').forEach(i=>i.value="");
        document.querySelectorAll('select').forEach(s=>s.selectedIndex=0);
        document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false);
        $('prompt').textContent = 'Your prompt will appear here…';
      }

      // --- Surprise me feature ---
      function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
      function surpriseMe(){
        // clear prompt display
        $('prompt').textContent = 'Your prompt will appear here…';

        const pools = {
          color: ["blue","green","purple","golden","turquoise","emerald","crimson","silver","teal","lavender"],
          accent: ["neon highlights","glowing stripes","sparkling dots","metallic accents","pearlescent shine","rainbow tips"],
          size: ["small","medium","large","giant"],
          age: ["young","adult","ancient"],
          wings: ["no wings","feathered wings","bat wings","insect wings"],
          horns: ["no horns","small horns","big curved horns","antlers"],
          legs: ["4","2","6","8","no visible legs"],
          tail: ["no tail","short tail","long tail","fluffy tail","spiked tail","fishtail"],
          habitat: ["forest","sea","sky","mountains","desert","city","outer space"],
          personality: ["friendly","curious","mischievous","brave","gentle","shy"],
          style: ["cartoon","watercolor","pixel art","3D render","realistic","storybook illustration"],
          pose: ["sitting","standing","walking","running","curled up"],
          expression: ["smiling","playful","sleepy","curious","proud"],
          time: ["daylight","golden hour","twilight","night with soft glow"],
          background: [
            "glowing mushrooms and tall ferns","crystal waterfall","floating islands",
            "starry sky and clouds","coral reef","icy cliffs","ancient ruins with vines"
          ],
          extras: ["scarf","tiny backpack","necklace of seashells","leaf crown","bracelets","small saddle"],
          composition: ["centered composition","rule of thirds composition","dynamic diagonal composition"],
          camera: ["eye-level view","low-angle view for a heroic feel","top-down view","wide-angle perspective","macro close-up of details"],
          quality: ["clean line work and simple shading","soft shading and gentle gradients","high detail with crisp edges","textured brushes for a painterly feel"],
          negatives: ["","no text","no watermark","no scary elements","no weapons","no gore","no cluttered background"]
        };

        // text inputs
        const nameEl = $('name'); if (nameEl) nameEl.value = randomName();
        const colorEl = $('color'); if (colorEl) colorEl.value = pick(pools.color);
        const accentEl = $('accent'); if (accentEl) accentEl.value = Math.random()<0.7 ? pick(pools.accent) : "";

        // selects
        const setSel = (id, val)=>{ const el=$(id); if(el){ el.value=val; } };
        setSel('size', pick(pools.size));
        setSel('age', pick(pools.age));
        setSel('wings', pick(pools.wings));
        setSel('horns', pick(pools.horns));
        setSel('legs', pick(pools.legs));
        setSel('tail', pick(pools.tail));
        setSel('habitat', pick(pools.habitat));
        setSel('personality', pick(pools.personality));
        setSel('style', pick(pools.style));
        setSel('pose', pick(pools.pose));
        setSel('expression', pick(pools.expression));
        setSel('time', pick(pools.time));
        setSel('composition', pick(pools.composition));
        setSel('camera', pick(pools.camera));
        setSel('quality', pick(pools.quality));

        // optional text fields
        const bgEl = $('background'); if (bgEl) bgEl.value = Math.random()<0.8 ? pick(pools.background) : "";
        const exEl = $('extras'); if (exEl) exEl.value = Math.random()<0.6 ? pick(pools.extras) : "";
        const negEl = $('negatives'); if (negEl) negEl.value = pick(pools.negatives);

        // checkboxes random subset
        function randomizeChecks(containerId, prob){
          document.querySelectorAll('#'+containerId+' input[type="checkbox"]').forEach(cb=>{
            cb.checked = Math.random() < prob;
          });
        }
        randomizeChecks('patterns', 0.45);
        randomizeChecks('abilities', 0.4);

        // finally build prompt
        buildPrompt();
      }

      $('buildBtn').addEventListener('click', buildPrompt, false);
      $('copyBtn').addEventListener('click', copyPrompt, false);
      $('resetBtn').addEventListener('click', resetAll, false);
      $('surpriseBtn').addEventListener('click', surpriseMe, false);
    });
  </script>
  <script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js');
  });
}
</script>

</body>
</html>
